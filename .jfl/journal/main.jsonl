{"v":1,"ts":"2026-02-07T00:35:00Z","session":"main","type":"architecture","title":"JFL as gateway - DO NOT launch Claude Code","summary":"BREAKING: JFL should act as the gateway/orchestrator, not launch AI tools. AI tools connect TO JFL, not the other way around.","detail":"Current (wrong): User → jfl → Launch Claude Code\n\nNew (correct): User → jfl (gateway) → Context Hub → AI agents connect to JFL\n\nJFL should:\n- Run as persistent gateway process\n- Manage context-hub\n- Expose APIs for AI agents to connect\n- Orchestrate services\n- NOT launch Claude Code/Cursor/etc\n\nAI tools connect TO JFL via:\n- MCP (Model Context Protocol)\n- HTTP API\n- WebSocket for real-time\n\nThis inverts the current architecture. JFL becomes the central nervous system, AI tools become clients.","decision":"JFL acts as gateway/orchestrator. AI tools connect TO JFL. Do NOT launch Claude Code from JFL.","learned":["Correct architecture: JFL = server, AI tools = clients","Gateway pattern > launcher pattern","JFL should be persistent, not ephemeral"]}
{"v":1,"ts":"2026-02-07T00:45:00Z","session":"main","type":"breaking","title":"JFL gateway implementation - removed AI CLI launcher","summary":"BREAKING CHANGE: JFL no longer launches Claude Code or other AI tools. Instead, JFL acts as a gateway that AI tools connect to via MCP.","detail":"Complete rewrite of session command:\n\nOLD BEHAVIOR:\n- jfl command detected and launched AI CLIs (Claude Code, Cursor, Aider)\n- AI CLI selection menu\n- Preference saving for AI tool choice\n- Direct spawn of AI processes\n\nNEW BEHAVIOR:\n- jfl command shows Gateway Dashboard\n- Ensures Context Hub is running (port 4242)\n- Checks Service Manager status (port 3401)\n- Shows connection endpoints and status\n- Exits with instructions for AI tools to connect\n- AI tools connect TO JFL via MCP\n\nArchitecture:\nUser → jfl (gateway)\n    ├── Context Hub (4242) - Project context\n    ├── Service Manager (3401) - Services lifecycle\n    └── MCP Server - AI agent interface\n        ↑\n    Claude Code/Cursor connect via MCP\n\nWhat was removed:\n- detectAICLIs() function\n- launchCLI() function\n- AI provider types and flags\n- Auto-launch preferences\n- CLI selection menu\n- All AI CLI spawning logic\n\nWhat was added:\n- showGatewayDashboard() - Status display\n- checkServiceManager() - Health check\n- axios dependency for HTTP health checks\n- Clear connection instructions\n\nThis inverts the architecture: JFL is now the server, AI tools are clients.","decision":"JFL acts as persistent gateway. AI tools connect to JFL. Do NOT launch Claude Code.","learned":["Gateway pattern > launcher pattern","JFL should be the central nervous system","AI tools as clients, not launched processes","Status dashboard more useful than auto-launch","MCP is the correct interface for AI tools"]}
