{"v":1,"ts":"2026-02-09T23:30:00.000Z","session":"main","type":"feature","status":"complete","title":"Fixed JFL CLI namespace violations - MCP config, Conf replacement, code directory","summary":"Stopped JFL from modifying files outside ~/.jfl/ namespace. Fixed 3 critical violations: .mcp.json (Claude Code's config), Conf library storage (OS-specific dirs), and hardcoded ~/code/formation clone location.","detail":"Created src/utils/jfl-config.ts utility to centralize all config in ~/.jfl/config.json. Updated service-agent.ts to write MCP config to project-local .mcp.json (if in project) or ~/.jfl/mcp-config.json (otherwise). Replaced all Conf library usage (5 files) with new utility. Added getCodeDirectory() that prompts user on first use and stores preference. Updated onboard.ts and init.ts to use user's code directory instead of hardcoded ~/code/formation.","files":["src/utils/jfl-config.ts","src/commands/service-agent.ts","src/commands/profile.ts","src/commands/login.ts","src/utils/auth-guard.ts","src/utils/ensure-project.ts","src/index.ts","src/commands/onboard.ts","src/commands/init.ts"],"next":"Add migration command for existing users, add verification tests","learned":["Smart MCP config detection: project-local if in project, JFL namespace otherwise","User preference prompting pattern: ask once, store, reuse","Breaking other tools' configs is a critical violation"]}
